(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"199":function(e,t,o){e.exports={"background":"postitem-module__background___R2iio","contentArea":"postitem-module__contentArea___1p_ir","contentTextarea":"postitem-module__contentTextarea___1Xz8x","contentImagePicker":"postitem-module__contentImagePicker___2whY-","detailsArea":"postitem-module__detailsArea___11gYO","detailsItem":"postitem-module__detailsItem___3EsqT","detailsTitle":"postitem-module__detailsTitle___3Qiz4","specification":"postitem-module__specification___3UtgM","lineAfter":"postitem-module__lineAfter___1Bxal","detailsContent":"postitem-module__detailsContent___3f52O","buttonGroup":"postitem-module__buttonGroup___3S0wh","halfWidthButton":"postitem-module__halfWidthButton___3p31n","active":"postitem-module__active___CU9DZ","detailsScrollView":"postitem-module__detailsScrollView___2qnu0","categoryItem":"postitem-module__categoryItem___6NH0A","selected":"postitem-module__selected___38Z9B","highlight":"postitem-module__highlight___2SJxr","COVID":"postitem-module__COVID___SwbIE","detailsSettings":"postitem-module__detailsSettings___1D4zQ","switch":"postitem-module__switch___320H-","itemButtonGroup":"postitem-module__itemButtonGroup___W0pcj","itemButton":"postitem-module__itemButton___3zBwx","anonymousTextarea":"postitem-module__anonymousTextarea___1mHIo","topicContainer":"postitem-module__topicContainer___2N8oM","topicItem":"postitem-module__topicItem___l2Ogk","topicDelete":"postitem-module__topicDelete___1UV5I","topicClear":"postitem-module__topicClear___Swcco","notification":"postitem-module__notification___3sFwE","fullWidthButton":"postitem-module__fullWidthButton___19aYc","locationItem":"postitem-module__locationItem___25gBt"}},"220":function(e,t,o){"use strict";o.r(t);var a=o(10),n=o(16),c=o(148),i=o(12),s=o(9);function createLocationChooser(e){var t,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6ABZ-DYX6W-ABWRA-O2NXT-BQV35-HUBZY",n="\n<div class='taro_choose_location'>\n  <div class='taro_choose_location_bar'>\n    <div class='taro_choose_location_back'></div>\n    <p class='taro_choose_location_title'>位置</p>\n    <button class='taro_choose_location_submit'>完成</button>\n  </div>\n  <iframe class='taro_choose_location_frame' frameborder='0' src='https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=".concat(a,"&referer=myapp'></iframe>\n</div>\n"),c=document.createElement("div");c.innerHTML=n;var i=c.querySelector(".taro_choose_location");function show(){setTimeout((function(){i.style.top="0"}))}function hide(){i.style.top="100%"}function back(){hide(),e({"errMsg":"cancel"})}function submit(){hide(),e()}function remove(){c.remove(),window.removeEventListener("popstate",back)}return null===(t=c.querySelector(".taro_choose_location_back"))||void 0===t||t.addEventListener("click",back),null===(o=c.querySelector(".taro_choose_location_submit"))||void 0===o||o.addEventListener("click",submit),window.addEventListener("popstate",back),{"show":show,"remove":remove,"container":c}}var l=o(160),r=o(199),_=o.n(r),d=o(162),m=o(164),u=o(173),j=o(159),h=o.n(j),b=o(149),p=o(33),O=o(172),x=o(27);t.default=function PostItem(e){var t=Object(i.useContext)(p.c),o=Object(n.a)(t,2),r=o[0],j=(o[1],Object(i.useState)("")),g=Object(n.a)(j,2),f=g[0],v=g[1],N=Object(i.useState)(200),q=Object(n.a)(N,2),w=q[0],C=q[1],I=Object(u.a)(),A=Object(n.a)(I,3),y=A[0],B=A[1],S=A[2],k=Object(i.useState)(0),T=Object(n.a)(k,2),L=T[0],E=T[1],W=(Object(i.useMemo)((function(){return Object(b.d)(L)}),[L]),Object(i.useState)("")),Y=Object(n.a)(W,2),D=Y[0],V=Y[1],P=Object(i.useState)(null),M=Object(n.a)(P,2),G=M[0],H=M[1],X=function selectLocation(){(function chooseLocation(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,o=e.fail,a=e.complete,n="G6ABZ-DYX6W-ABWRA-O2NXT-BQV35-HUBZY",c=new s.b({"name":"chooseLocation","success":t,"fail":o,"complete":a});return new Promise((function(e,t){var o={};if(!n)return console.warn("chooseLocation api 依赖腾讯地图定位api，需要在 defineConstants 中配置 LOCATION_APIKEY"),c.fail({"errMsg":"LOCATION_APIKEY needed"},t);var a=function onMessage(e){var t=e.data;t&&"locationPicker"===t.module&&(o.name=t.poiname,o.address=t.poiaddress,o.latitude=t.latlng.lat,o.longitude=t.latlng.lng)},i=createLocationChooser((function(n){return window.removeEventListener("message",a,!1),setTimeout((function(){i.remove()}),300),n?c.fail(n,t):o.latitude&&o.longitude?c.success(o,e):c.fail({},t)}),n);document.body.appendChild(i.container),window.addEventListener("message",a,!1),i.show()}))})({}).then((function(e){H(e)}),(function(){H(null!=G?G:null)}))},Z=Object(i.useState)(r.city),R=Object(n.a)(Z,2),U=R[0],z=R[1];return Object(O.a)("goods:post",[f,w,y,L,D,G],(function(e){v(e[0]),C(e[1]),S(e[2]),E(e[3]),V(e[4]),H(e[5])})),Object(x.jsxs)(c.q,{"children":[Object(x.jsx)(l.b,{"title":"发布","bottomLine":!0}),Object(x.jsx)(d.a,{"navigation":!0,"className":_.a.background,"children":Object(x.jsxs)(c.j,{"scrollY":!0,"scrollWithAnimation":!0,"style":{"height":"100%"},"children":[function renderContent(){return Object(x.jsxs)(c.q,{"className":_.a.contentArea,"children":[Object(x.jsx)(m.e,{"className":_.a.contentTextarea,"value":f,"onChange":v,"maxLength":1e3,"placeholder":"新旧程度：\n购买渠道：\n期望价格：","autoFocus":!0,"count":!1,"height":w,"onLinechange":function onLinechange(e){C(e.detail.heightRpx>200?e.detail.heightRpx:200)}}),Object(x.jsx)(m.b,{"className":_.a.contentImagePicker,"files":y,"onChange":B,"count":9})]})}(),Object(x.jsxs)(c.q,{"className":_.a.detailsArea,"children":[function renderCategorySettings(){return Object(x.jsxs)(c.q,{"className":_.a.detailsItem,"children":[Object(x.jsxs)(c.q,{"className":_.a.detailsTitle,"children":[Object(x.jsx)(c.o,{"children":"闲置分类"}),Object(x.jsx)(c.q,{"className":_.a.lineAfter})]}),Object(x.jsx)(c.q,{"className":_.a.detailsContent,"children":Object(x.jsx)(c.j,{"className":_.a.detailsScrollView,"scrollX":!0,"scrollWithAnimation":!0,"children":b.b.map((function(e,t){var o;return Object(x.jsxs)(m.a,{"className":h()((o={},Object(a.a)(o,_.a.categoryItem,!0),Object(a.a)(o,_.a.highlight,e.highlight),Object(a.a)(o,_.a.selected,L===t),Object(a.a)(o,_.a.COVID,0===t),o)),"onClick":function onClick(){return E(t)},"children":[" ",e.title]},t)}))})})]})}(),function renderContactSettings(){return Object(x.jsxs)(c.q,{"className":_.a.detailsItem,"children":[Object(x.jsxs)(c.q,{"className":_.a.detailsTitle,"children":[Object(x.jsx)(c.o,{"children":"联系方式"}),Object(x.jsx)(c.q,{"className":_.a.lineAfter})]}),Object(x.jsx)(c.q,{"className":_.a.detailsContent,"children":Object(x.jsxs)(c.q,{"className":_.a.detailsSettings,"style":{"marginBottom":0},"children":[Object(x.jsxs)(c.q,{"children":["微信号",Object(x.jsx)(c.o,{"style":{"color":"red"},"children":"*"})]}),Object(x.jsx)(c.d,{"type":"text","maxlength":9,"className":_.a.anonymousTextarea,"placeholderClass":_.a.anonymousTextarea,"placeholder":"请输入你的微信号","value":D,"onInput":function onInput(e){V(e.detail.value)}})]})})]})}(),function renderLocationSettings(){var e;return Object(x.jsxs)(x.Fragment,{"children":[Object(x.jsxs)(c.q,{"className":_.a.detailsItem,"children":[Object(x.jsxs)(c.q,{"className":_.a.detailsTitle,"children":[Object(x.jsx)(c.o,{"children":"发布设置"}),Object(x.jsx)(c.q,{"className":_.a.lineAfter})]}),Object(x.jsx)(c.q,{"className":_.a.detailsContent,"children":Object(x.jsxs)(c.q,{"className":_.a.detailsSettings,"style":{"marginBottom":0},"children":[Object(x.jsx)(c.q,{"children":"发布定位"}),Object(x.jsx)(c.q,{"className":_.a.locationItem,"onClick":X,"children":"".concat(null!==(e=null==G?void 0:G.address)&&void 0!==e?e:"请选择定位"," >")})]})})]}),Object(x.jsxs)(c.q,{"className":_.a.detailsItem,"children":[Object(x.jsxs)(c.q,{"className":_.a.detailsTitle,"children":[Object(x.jsx)(c.o,{"children":"选择城市"}),Object(x.jsx)(c.q,{"className":_.a.lineAfter})]}),Object(x.jsx)(c.q,{"className":_.a.detailsContent,"children":Object(x.jsxs)(c.q,{"className":_.a.detailsSettings,"style":{"marginBottom":0},"children":[Object(x.jsx)(c.q,{}),Object(x.jsx)(c.i,{"mode":"selector","range":["1","2"],"onChange":function onChange(e){z(e.detail.value)},"children":Object(x.jsx)(c.q,{"className":_.a.locationItem,"children":"".concat(null!=U?U:"请选择城市"," >")})})]})})]})]})}(),Object(x.jsx)(c.q,{"className":_.a.notification,"children":"*带定位发布可以提高闲置成交率"}),Object(x.jsx)(m.a,{"className":_.a.fullWidthButton,"circle":!0,"children":"发布"})]})]})})]})}}}]);