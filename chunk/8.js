(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"157":function(e,t,a){"use strict";a.d(t,"a",(function(){return useParams}));var n=a(61);function useParams(){var e;return null===(e=Object(n.b)().router)||void 0===e?void 0:e.params}},"165":function(e,t,a){"use strict";a.d(t,"b",(function(){return useFileList})),a.d(t,"a",(function(){return useAutoSaveRestore})),a.d(t,"c",(function(){return g.a}));var n=a(19),c=a(9),i=a(10),s=a.n(i),l=a(18),o=a(70),r=a(65),u=a(173),d=a(153),j=a(154),_=a(55),m={"mockUrl":"http://yapi.smart-xwork.cn/mock/129336","devUrl":"","prodUrl":"","path":"/getPostObjectParams","method":d.a.GET,"requestHeaders":{},"requestBodyType":d.b.query,"responseBodyType":d.c.json,"dataKey":void 0,"paramNames":[],"queryNames":[],"requestDataOptional":!0,"requestDataJsonSchema":{},"responseDataJsonSchema":{},"requestFunctionName":"getPostObjectParams","extraInfo":{}},b=function getPostObjectParams(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return _.a.apply(void 0,[Object(j.a)(m,e)].concat(a))};b.requestConfig=m;var h=a(36);function useFileList(){var e=Object(l.useState)([]),t=Object(c.a)(e,2),a=t[0],i=t[1],d=function(){var e=Object(n.a)(s.a.mark((function _callee(e,t,n){var c,l,d,j,_,m,x;return s.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if("remove"!==t){s.next=4;break}i(a.filter((function(e,t){return t!==n}))),s.next=16;break;case 4:return c=e[e.length-1],s.next=7,b({},{"mock":!0});case 7:if(l=s.sent.data,d=l.signature,j=l.OSSAccessKeyId,_=l.policy,m=c.url,h.a){s.next=14;break}return s.next=13,Object(o.c)({"src":c.url,"quality":30});case 13:m=s.sent.tempFilePath;case 14:x=u.a.encode(m)+".png",Object(r.a)({"filePath":m,"name":"file","url":"https://alllink-overseas.oss-eu-west-1.aliyuncs.com","formData":{"key":x,"policy":_,"OSSAccessKeyId":j,"signature":d},"success":function success(e){204===e.statusCode&&(console.log("上传成功"),c.token="https://file2.alllink.work"+x,a.push(c),i(a))}});case 16:case"end":return s.stop()}}),_callee)})));return function onFileChange(t,a,n){return e.apply(this,arguments)}}();return[a,d,i]}var x=a(258),O=a(191),f=a(33),p=a(51);function useAutoSaveRestore(e,t,a){Object(l.useEffect)((function(){try{var t=Object(f.i)(e);t&&(a(t),Object(p.h)({"title":"已恢复草稿","icon":"success","duration":2e3}))}catch(e){}}),[]);var n=Object(x.a)((function(){Object(f.p)(e,t)}),{"wait":2e3}).run;Object(O.a)(n,t)}var g=a(157)},"232":function(e,t,a){"use strict";a.d(t,"a",(function(){return useBoolean}));var n=a(18),__read=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,c,i=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){c={"error":e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(c)throw c.error}}return s};var c=function useToggle(e,t){void 0===e&&(e=!1);var a=__read(Object(n.useState)(e),2),c=a[0],i=a[1];return[c,Object(n.useMemo)((function(){var a=void 0===t?!e:t;return{"toggle":function toggle(){return i((function(t){return t===e?a:e}))},"set":function set(e){return i(e)},"setLeft":function setLeft(){return i(e)},"setRight":function setRight(){return i(a)}}}),[])]},useBoolean_read=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,c,i=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){c={"error":e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(c)throw c.error}}return s};function useBoolean(e){void 0===e&&(e=!1);var t=useBoolean_read(c(e),2),a=t[0],i=t[1],s=i.toggle,l=i.set;return[a,Object(n.useMemo)((function(){return{"toggle":s,"set":function set(e){return l(!!e)},"setTrue":function setTrue(){return l(!0)},"setFalse":function setFalse(){return l(!1)}}}),[])]}},"253":function(e,t,a){e.exports={"multi-ellipsis--l2":"index-module__multi-ellipsis--l2___2n5C5","multi-ellipsis--l3":"index-module__multi-ellipsis--l3___2bV-g","multi-ellipsis--l4":"index-module__multi-ellipsis--l4___tjE8G","background":"index-module__background___LCD2B","contentArea":"index-module__contentArea___27oek","contentTextarea":"index-module__contentTextarea___2F-lt","contentImagePicker":"index-module__contentImagePicker___1XhlN","detailsArea":"index-module__detailsArea___1zMn_","detailsItem":"index-module__detailsItem___QGDWa","detailsTitle":"index-module__detailsTitle___2hSWq","specification":"index-module__specification___Bqc1H","lineAfter":"index-module__lineAfter___1ODnS","detailsContent":"index-module__detailsContent___2dLHB","buttonGroup":"index-module__buttonGroup___Vjct_","halfWidthButton":"index-module__halfWidthButton___3ttV6","active":"index-module__active___1pLiN","detailsScrollView":"index-module__detailsScrollView___1n1OJ","categoryItem":"index-module__categoryItem___z4-T9","selected":"index-module__selected___2R5o2","highlight":"index-module__highlight___fAQPp","COVID":"index-module__COVID___2fSxN","detailsSettings":"index-module__detailsSettings___2WYEf","switch":"index-module__switch___1MJLL","itemButtonGroup":"index-module__itemButtonGroup___2Yd8K","itemButton":"index-module__itemButton___1pCOe","anonymousTextarea":"index-module__anonymousTextarea___1LLeS","topicContainer":"index-module__topicContainer___AJG4x","topicItem":"index-module__topicItem___L86Es","topicDelete":"index-module__topicDelete___36BlN","topicClear":"index-module__topicClear___1dEGn","notification":"index-module__notification___Vk0Di","fullWidthButton":"index-module__fullWidthButton___1bjLh"}},"259":function(e,t,a){"use strict";a.r(t);var n=a(12),c=a(9),i=a(155),s=a(18),l=a(21),o=a(160),r=a(253),u=a.n(r),d=a(159),j=a(163),_=a(165),m=a(158),b=a.n(m),h=a(232),x=a(29);t.default=function PostBbs(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),r=a[0],m=a[1],O=Object(s.useState)(200),f=Object(c.a)(O,2),p=f[0],g=f[1],w=Object(_.b)(),v=Object(c.a)(w,3),N=v[0],y=v[1],V=v[2],S=Object(h.a)(!1),k=Object(c.a)(S,2),C=k[0],T=k[1],B=T.setTrue,I=T.setFalse,A=T.set,L=Object(h.a)(!1),P=Object(c.a)(L,2),q=P[0],D=P[1],F=D.toggle,W=D.set,G=Object(h.a)(!1),J=Object(c.a)(G,2),R=J[0],E=J[1],z=E.toggle,K=E.set,M=Object(h.a)(!1),H=Object(c.a)(M,2),U=H[0],Y=H[1],Q=Y.toggle,X=Y.set,$=Object(h.a)(!0),Z=Object(c.a)($,2),ee=Z[0],te=Z[1],ae=te.toggle,ne=te.set,ce=Object(s.useState)("某同学"),ie=Object(c.a)(ce,2),se=ie[0],le=ie[1],oe=Object(h.a)(!1),re=Object(c.a)(oe,2),ue=re[0],de=re[1],je=de.setTrue,_e=de.setFalse,me=de.set,be=Object(s.useState)(e.topic?[e.topic]:["1241","we5134512345","1wq079e59qwe89ityweahioeghfiuw"]),he=Object(c.a)(be,2),xe=he[0],Oe=he[1];return Object(_.a)("bbs:post",[r,p,N,C,q,R,U,ee,se,ue,xe],(function(e){m(e[0]),g(e[1]),V(e[2]),A(e[3]),W(e[4]),K(e[5]),X(e[6]),ne(e[7]),le(e[8]),me(e[9]),Oe(e[10])})),Object(x.jsxs)(i.View,{"children":[Object(x.jsx)(o.f,{"title":"发布","bottomLine":!0}),Object(x.jsx)(d.b,{"navigation":!0,"className":u.a.background,"children":Object(x.jsxs)(i.ScrollView,{"scrollY":!0,"scrollWithAnimation":!0,"style":{"height":"100%"},"children":[function renderContent(){return Object(x.jsxs)(i.View,{"className":u.a.contentArea,"children":[Object(x.jsx)(j.g,{"className":u.a.contentTextarea,"value":r,"onChange":m,"maxLength":1e3,"placeholder":"每天都有特别的事，不是吗？","autoFocus":!0,"count":!1,"height":p,"onLinechange":function onLinechange(e){g(e.detail.heightRpx>200?e.detail.heightRpx:200)}}),Object(x.jsx)(j.b,{"className":u.a.contentImagePicker,"files":N,"onChange":y,"count":9})]})}(),Object(x.jsxs)(i.View,{"className":u.a.detailsArea,"children":[function renderNicknameSettings(){var e,t,a,c,s;return Object(x.jsxs)(i.View,{"className":u.a.detailsItem,"children":[Object(x.jsxs)(i.View,{"className":u.a.detailsTitle,"children":[Object(x.jsx)(i.Text,{"children":"昵称设置"}),Object(x.jsx)(i.View,{"className":u.a.lineAfter})]}),Object(x.jsx)(i.View,{"className":u.a.detailsContent,"children":Object(x.jsxs)(i.View,{"className":u.a.buttonGroup,"children":[Object(x.jsx)(j.a,{"className":b()((e={},Object(n.a)(e,u.a.halfWidthButton,!0),Object(n.a)(e,u.a.active,!C),e)),"circle":!0,"onClick":I,"children":" 默认"}),Object(x.jsx)(j.a,{"className":b()((t={},Object(n.a)(t,u.a.halfWidthButton,!0),Object(n.a)(t,u.a.active,C),t)),"circle":!0,"onClick":B,"children":" 自定义"})]})}),Object(x.jsx)(i.View,{"className":u.a.detailsContent,"children":C?Object(x.jsxs)(x.Fragment,{"children":[Object(x.jsxs)(i.View,{"className":u.a.detailsSettings,"children":[Object(x.jsx)(i.View,{"children":"展示项"}),Object(x.jsxs)(i.View,{"className":u.a.itemButtonGroup,"children":[Object(x.jsx)(j.a,{"className":b()((a={},Object(n.a)(a,u.a.itemButton,!0),Object(n.a)(a,u.a.active,R),a)),"circle":!0,"onClick":z,"children":" 专业"}),Object(x.jsx)(j.a,{"className":b()((c={},Object(n.a)(c,u.a.itemButton,!0),Object(n.a)(c,u.a.active,U),c)),"circle":!0,"onClick":Q,"children":" 年级"}),Object(x.jsx)(j.a,{"className":b()((s={},Object(n.a)(s,u.a.itemButton,!0),Object(n.a)(s,u.a.active,ee),s)),"circle":!0,"onClick":ae,"children":" 性别"})]})]}),Object(x.jsxs)(i.View,{"className":u.a.detailsSettings,"style":{"marginBottom":0},"children":[Object(x.jsx)(i.View,{"children":"自定义昵称"}),Object(x.jsx)(i.Input,{"type":"text","maxlength":9,"className":u.a.anonymousTextarea,"placeholderClass":u.a.anonymousTextarea,"placeholder":"请输入自定义昵称","value":se,"onInput":function onInput(e){le(e.detail.value)}})]})]}):Object(x.jsxs)(i.View,{"className":u.a.detailsSettings,"children":[Object(x.jsx)(i.View,{"children":"只允许公开评论"}),Object(x.jsx)(j.d,{"border":!1,"checked":q,"className":u.a.switch,"onChange":F})]})})]})}(),function renderPostSettings(){var e,t;return Object(x.jsxs)(x.Fragment,{"children":[Object(x.jsxs)(i.View,{"className":u.a.detailsItem,"children":[Object(x.jsxs)(i.View,{"className":u.a.detailsTitle,"children":[Object(x.jsx)(i.Text,{"children":"发布设置"}),Object(x.jsx)(i.View,{"className":u.a.lineAfter})]}),Object(x.jsx)(i.View,{"className":u.a.detailsContent,"children":Object(x.jsxs)(i.View,{"className":u.a.buttonGroup,"children":[Object(x.jsx)(j.a,{"className":b()((e={},Object(n.a)(e,u.a.halfWidthButton,!0),Object(n.a)(e,u.a.active,ue),e)),"circle":!0,"onClick":je,"children":" 全部可见"}),Object(x.jsx)(j.a,{"className":b()((t={},Object(n.a)(t,u.a.halfWidthButton,!0),Object(n.a)(t,u.a.active,!ue),t)),"circle":!0,"onClick":_e,"children":" 仅本校可见"})]})})]}),ue&&Object(x.jsxs)(i.View,{"className":u.a.detailsItem,"children":[Object(x.jsxs)(i.View,{"className":u.a.detailsTitle,"children":[Object(x.jsx)(i.Text,{"children":"添加话题"}),Object(x.jsx)(i.View,{"className":u.a.lineAfter})]}),Object(x.jsxs)(i.View,{"className":u.a.topicContainer,"children":[xe.map((function(e){return Object(x.jsxs)(i.View,{"className":u.a.topicItem,"children":[Object(x.jsx)(i.Text,{"children":e}),Object(x.jsx)(i.View,{"className":b()(["at-icon","at-icon-close-circle",u.a.topicDelete]),"style":{"fontSize":l.default.pxTransform(25)}})]})})),Object(x.jsx)(i.View,{"className":u.a.topicItem,"children":Object(x.jsx)(i.View,{"className":b()(["at-icon","at-icon-add"]),"style":{"fontSize":l.default.pxTransform(25)}})})]}),xe.length&&Object(x.jsx)(i.View,{"className":u.a.topicClear,"children":Object(x.jsx)(i.View,{"className":u.a.topicItem,"children":Object(x.jsx)(i.Text,{"children":"清除"})})})]})]})}(),Object(x.jsx)(j.a,{"className":u.a.fullWidthButton,"circle":!0,"children":"发布"})]})]})})]})}}}]);